(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{170:function(e,t,c){},176:function(e,t,c){},177:function(e,t,c){},178:function(e,t,c){},197:function(e,t,c){},325:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),s=c(28),a=c.n(s),i=(c(170),c(24)),o=c(6);function j(e){var t=Object(n.useState)(!1),c=Object(o.a)(t,2),r=c[0],s=c[1];return Object(n.useEffect)((function(){var t=window.matchMedia(e);t.matches!==r&&s(t.matches);var c=function(){return s(t.matches)};return window.addEventListener("resize",c),function(){return window.removeEventListener("resize",c)}}),[r,e]),r}var d=c(334),l=c(16),b=c(2),u=Object(n.createContext)({});function O(e){var t=e.children,c=Object(l.g)(),r=Object(n.useState)(!1),s=Object(o.a)(r,2),a=s[0],i=s[1],j=function(){return i(!1)};return Object(n.useEffect)((function(){j()}),[c.pathname]),Object(b.jsx)(u.Provider,{value:{isOpen:a,closeDrawer:j,openDrawer:function(){return i(!0)}},children:t})}var h=function(){return Object(n.useContext)(u)},x=c(47);c(176);function m(){return Object(b.jsxs)(i.b,{to:"/",className:"text-white text-decoration-none logo",children:[Object(b.jsx)(x.c,{size:28}),Object(b.jsx)("span",{className:"fs-4 ms-1",children:"Pizzaria"})]})}var p=c(5),v=c.n(p),f=c(79);c(177);function g(){var e=Object(l.g)().pathname,t="/"===e||e.includes("/products"),c=e.includes("/orders");return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("ul",{className:"nav nav-pills flex-column",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(i.b,{to:"/",className:v()("nav-link text-white",{active:t}),children:[Object(b.jsx)(x.d,{size:20}),Object(b.jsx)("span",{className:"ms-2",children:"Produtos"})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(i.b,{to:"/orders",className:v()("nav-link text-white",{active:c}),children:[Object(b.jsx)(f.a,{size:20}),Object(b.jsx)("span",{className:"ms-2",children:"Pedidos"})]})})]})})}function N(){var e=h(),t=e.isOpen,c=e.closeDrawer;return Object(b.jsxs)(d.a,{className:"bg-dark text-white",show:t,onHide:c,children:[Object(b.jsx)(d.a.Header,{closeButton:!0,children:Object(b.jsx)(d.a.Title,{children:Object(b.jsx)(m,{})})}),Object(b.jsx)(d.a.Body,{children:Object(b.jsx)(g,{})})]})}c(178);function w(){return j("(max-width: 900px)")?Object(b.jsx)(N,{}):Object(b.jsxs)("div",{className:"sidebar bg-dark text-white p-3",children:[Object(b.jsx)(m,{}),Object(b.jsx)("hr",{}),Object(b.jsx)(g,{})]})}var y=c(8),C=c.n(y),k=c(17),P=c(337),z=c(160),E=c.n(z).a.create({baseURL:"https://pizzariaserver.herokuapp.com/"}),S=c(161);function I(e){var t=e.title,c=h().openDrawer,n=j("(max-width: 900px)");return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"d-flex align-items-center mt-4",children:[n&&Object(b.jsx)(P.a,{className:"me-2",variant:"outline-dark",onClick:c,children:Object(b.jsx)(S.a,{})}),Object(b.jsx)("h4",{className:"m-0",children:t})]}),Object(b.jsx)("hr",{})]})}var D=c(330);c(197);function L(e){var t=e.products,c=e.onEdit,n=e.onDelete;return Object(b.jsxs)(D.a,{striped:!0,bordered:!0,children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Imagem"}),Object(b.jsx)("th",{children:"Nome"}),Object(b.jsx)("th",{children:"Pre\xe7o"}),Object(b.jsx)("th",{children:"Ativo"}),Object(b.jsx)("th",{children:"A\xe7\xf5es"})]})}),Object(b.jsxs)("tbody",{children:[0===t.length&&Object(b.jsx)("tr",{children:Object(b.jsx)("td",{className:"text-center",colSpan:5,children:"Nenhum produto cadastrado \ud83c\udf55"})}),t.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"product-image",children:Object(b.jsx)("img",{src:e.image,alt:e.name})}),Object(b.jsxs)("td",{children:[Object(b.jsx)("strong",{children:e.name}),Object(b.jsx)("p",{className:"fs-6 fw-light",children:e.description})]}),Object(b.jsx)("td",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.price)}),Object(b.jsx)("td",{className:v()({"text-success":e.active},{"text-danger":!e.active}),children:e.active?"Sim":"N\xe3o"}),Object(b.jsx)("td",{children:Object(b.jsxs)("div",{className:"actions",children:[Object(b.jsx)(P.a,{onClick:function(){return c(e._id)},variant:"warning",size:"sm",children:Object(b.jsx)(x.b,{size:18})}),Object(b.jsx)(P.a,{onClick:function(){return n(e._id)},variant:"danger",size:"sm",children:Object(b.jsx)(x.a,{size:18})})]})})]},e._id)}))]})]})}var B=c(107),A=c.n(B),F=A.a.mixin({toast:!0,position:"top-right",iconColor:"white",customClass:{popup:"colored-toast"},showConfirmButton:!1,timer:5e3,timerProgressBar:!0,showCloseButton:!0}),G=A.a.mixin({title:"Aten\xe7\xe3o",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Sim, quero remover!",cancelButtonText:"Cancelar"});function R(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],r=t[1],s=Object(l.f)();function a(){return(a=Object(k.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.fire({text:"Deseja realmente deletar o produto ?"});case 2:if(!e.sent.value){e.next=9;break}return e.next=6,E.delete("/pizzas/".concat(t));case 6:return r(c.filter((function(e){return e._id!==t}))),e.next=9,F.fire({icon:"success",title:"Produto removido com sucesso"});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){E.get("pizzas").then((function(e){r(e.data)}))}),[]),Object(b.jsxs)("section",{id:"page-products",children:[Object(b.jsx)(I,{title:"Produtos"}),Object(b.jsx)(P.a,{onClick:function(){s.push("/products/new")},className:"mb-3",children:"Adicionar Produto"}),Object(b.jsx)(L,{onEdit:function(e){s.push("/products/".concat(e))},onDelete:function(e){return a.apply(this,arguments)},products:c})]})}var q=c(3),_=c(335),T=c(37),H=c(89),J=c(29),M=J.a({image:J.b().required("Imagem \xe9 obrigat\xf3ria"),name:J.b().required("Nome \xe9 obrigat\xf3rio"),price:J.b().required("Pre\xe7o \xe9 obrigat\xf3rio"),description:J.b().required("Descri\xe7\xe3o \xe9 obrigat\xf3ria")});function V(){var e,t,c,r,s=Object(l.f)(),a=Object(n.useState)(!0),i=Object(o.a)(a,2),j=i[0],d=i[1],u=Object(T.d)({resolver:Object(H.a)(M)}),O=u.register,h=u.handleSubmit,x=u.formState.errors;function m(){return(m=Object(k.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.post("pizzas",Object(q.a)(Object(q.a)({},t),{},{active:j}));case 2:return s.push("/"),e.next=5,F.fire({icon:"success",title:"Produto adicionado com sucesso"});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)("section",{id:"page-products-add",children:[Object(b.jsx)(I,{title:"Adicionar Produto"}),Object(b.jsxs)(_.a,{onSubmit:h((function(e){return m.apply(this,arguments)})),children:[Object(b.jsxs)(_.a.Group,{className:"mb-3",children:[Object(b.jsx)(_.a.Label,{children:"Imagem"}),Object(b.jsx)(_.a.Control,Object(q.a)({type:"text",isInvalid:!!x.image},O("image"))),Object(b.jsx)(_.a.Control.Feedback,{type:"invalid",children:null===(e=x.image)||void 0===e?void 0:e.message})]}),Object(b.jsxs)(_.a.Group,{className:"mb-3",children:[Object(b.jsx)(_.a.Label,{children:"Nome"}),Object(b.jsx)(_.a.Control,Object(q.a)({type:"text",isInvalid:!!x.name},O("name"))),Object(b.jsx)(_.a.Control.Feedback,{type:"invalid",children:null===(t=x.name)||void 0===t?void 0:t.message})]}),Object(b.jsxs)(_.a.Group,{className:"mb-3",children:[Object(b.jsx)(_.a.Label,{children:"Pre\xe7o"}),Object(b.jsx)(_.a.Control,Object(q.a)({type:"text",isInvalid:!!x.price},O("price"))),Object(b.jsx)(_.a.Control.Feedback,{type:"invalid",children:null===(c=x.price)||void 0===c?void 0:c.message})]}),Object(b.jsxs)(_.a.Group,{className:"mb-3",children:[Object(b.jsx)(_.a.Label,{children:"Descri\xe7\xe3o"}),Object(b.jsx)(_.a.Control,Object(q.a)({as:"textarea",rows:3,isInvalid:!!x.description},O("description"))),Object(b.jsx)(_.a.Control.Feedback,{type:"invalid",children:null===(r=x.description)||void 0===r?void 0:r.message})]}),Object(b.jsx)(_.a.Check,{checked:j,onChange:function(e){return d(e.target.checked)},type:"switch",label:"Ativo",className:"mb-3"}),Object(b.jsx)(P.a,{className:"mb-3",variant:"primary",type:"submit",children:"Salvar Produto"})]})]})}var Q=J.a({image:J.b().required("Imagem \xe9 obrigat\xf3ria"),name:J.b().required("Nome \xe9 obrigat\xf3rio"),price:J.b().required("Pre\xe7o \xe9 obrigat\xf3rio"),description:J.b().required("Descri\xe7\xe3o \xe9 obrigat\xf3ria")});function U(){var e,t,c,r,s=Object(l.f)(),a=Object(l.h)(),i=Object(n.useState)(!0),j=Object(o.a)(i,2),d=j[0],u=j[1],O=Object(T.d)({resolver:Object(H.a)(Q)}),h=O.register,x=O.handleSubmit,m=O.setValue,p=O.formState.errors;function v(){return(v=Object(k.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.put("/pizzas/".concat(a.id),Object(q.a)(Object(q.a)({},t),{},{active:d}));case 2:return s.push("/"),e.next=5,F.fire({icon:"success",title:"Produto editado com sucesso"});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){E.get("/pizzas/".concat(a.id)).then((function(e){var t=e.data;m("image",t.image),m("name",t.name),m("price",t.price),m("description",t.description),u(t.active)}))}),[m,a.id]),Object(b.jsxs)("section",{id:"page-products-add",children:[Object(b.jsx)(I,{title:"Editar Produto"}),Object(b.jsxs)(_.a,{onSubmit:x((function(e){return v.apply(this,arguments)})),children:[Object(b.jsxs)(_.a.Group,{className:"mb-3",children:[Object(b.jsx)(_.a.Label,{children:"Imagem"}),Object(b.jsx)(_.a.Control,Object(q.a)({type:"url",isInvalid:!!p.image},h("image"))),Object(b.jsx)(_.a.Control.Feedback,{type:"invalid",children:null===(e=p.image)||void 0===e?void 0:e.message})]}),Object(b.jsxs)(_.a.Group,{className:"mb-3",children:[Object(b.jsx)(_.a.Label,{children:"Nome"}),Object(b.jsx)(_.a.Control,Object(q.a)({type:"text",isInvalid:!!p.name},h("name"))),Object(b.jsx)(_.a.Control.Feedback,{type:"invalid",children:null===(t=p.name)||void 0===t?void 0:t.message})]}),Object(b.jsxs)(_.a.Group,{className:"mb-3",children:[Object(b.jsx)(_.a.Label,{children:"Pre\xe7o"}),Object(b.jsx)(_.a.Control,Object(q.a)({type:"text",isInvalid:!!p.price},h("price"))),Object(b.jsx)(_.a.Control.Feedback,{type:"invalid",children:null===(c=p.price)||void 0===c?void 0:c.message})]}),Object(b.jsxs)(_.a.Group,{className:"mb-3",children:[Object(b.jsx)(_.a.Label,{children:"Descri\xe7\xe3o"}),Object(b.jsx)(_.a.Control,Object(q.a)({as:"textarea",rows:3,isInvalid:!!p.description},h("description"))),Object(b.jsx)(_.a.Control.Feedback,{type:"invalid",children:null===(r=p.description)||void 0===r?void 0:r.message})]}),Object(b.jsx)(_.a.Check,{checked:d,onChange:function(e){return u(e.target.checked)},type:"switch",label:"Ativo",className:"mb-3"}),Object(b.jsx)(P.a,{className:"mb-3",variant:"primary",type:"submit",children:"Salvar Produto"})]})]})}var K=c(9),W=c(165),X=c(331),Y=c(333),Z=c(332),$={PENDING:"Pendente",PREPARING:"Preparando",DONE:"Entregue",CANCELLED:"Cancelado"},ee={PENDING:"secondary",PREPARING:"warning",DONE:"success",CANCELLED:"danger"};function te(e){var t=e.orders,c=e.onNavigate;return Object(b.jsxs)(D.a,{striped:!0,bordered:!0,children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"ID do pedido"}),Object(b.jsx)("th",{children:"Item"}),Object(b.jsx)("th",{children:"Total"}),Object(b.jsx)("th",{children:"Status"}),Object(b.jsx)("th",{className:"text-center",children:"A\xe7\xf5es"})]})}),Object(b.jsxs)("tbody",{children:[0===t.length&&Object(b.jsx)("tr",{children:Object(b.jsx)("td",{className:"text-center",colSpan:5,children:"Sem pedidos \ud83c\udf55"})}),t.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsxs)("td",{children:["#",e._id]}),Object(b.jsx)("td",{children:e.item.name}),Object(b.jsx)("td",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.total)}),Object(b.jsx)("td",{children:Object(b.jsx)(X.a,{bg:ee[e.status],children:$[e.status]})}),Object(b.jsx)("td",{className:"text-center",children:Object(b.jsx)(Y.a,{placement:"top-end",overlay:Object(b.jsx)(Z.a,{children:"Detalhes do pedido"}),children:Object(b.jsx)(P.a,{onClick:function(){return c(e._id)},variant:"primary",size:"sm",children:Object(b.jsx)(f.b,{size:18})})})})]},e._id)}))]})]})}function ce(){var e=Object(l.f)(),t=Object(n.useState)([]),c=Object(o.a)(t,2),r=c[0],s=c[1];return Object(n.useEffect)((function(){E.get("orders").then((function(e){s(e.data)})),Object(W.io)("https://pizzariaserver.herokuapp.com/").on("newOrder",function(){var e=Object(k.a)(C.a.mark((function e(t){var c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t,s((function(e){return[c].concat(Object(K.a)(e))})),new Audio("".concat("/pizzaria","/notification.mp3")).play(),e.next=5,F.fire({icon:"info",title:"Novo pedido adicionado"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(b.jsxs)("section",{id:"page-orders",children:[Object(b.jsx)(I,{title:"Pedidos"}),Object(b.jsx)(te,{orders:r,onNavigate:function(t){e.push("/orders/".concat(t))}})]})}var ne=c(336);function re(){var e=Object(l.f)(),t=Object(l.h)(),c=Object(n.useState)(),r=Object(o.a)(c,2),s=r[0],a=r[1],i=Object(n.useState)(""),j=Object(o.a)(i,2),d=j[0],u=j[1];function O(){return(O=Object(k.a)(C.a.mark((function e(){var c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.patch("/orders/".concat(t.id),{status:d});case 2:return c=e.sent,a(c.data),e.next=6,F.fire({icon:"success",title:"Status do pedido alterado com sucesso"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){E.get("/orders/".concat(t.id)).then((function(e){var t=e.data;a(t),u(t.status)}))}),[t.id]),s?Object(b.jsxs)("section",{id:"page-order-details",children:[Object(b.jsx)(I,{title:"Pedido #".concat(t.id)}),Object(b.jsxs)(ne.a,{children:[Object(b.jsxs)(ne.a.Body,{children:[Object(b.jsxs)("div",{className:"fs-6 mb-1",children:[Object(b.jsx)("strong",{children:"Item:"}),Object(b.jsx)("span",{className:"ms-2",children:s.item.name})]}),Object(b.jsxs)("div",{className:"fs-6 mb-1",children:[Object(b.jsx)("strong",{children:"Descri\xe7\xe3o:"}),Object(b.jsx)("span",{className:"ms-2",children:s.item.description})]}),Object(b.jsxs)("div",{className:"fs-6 mb-1",children:[Object(b.jsx)("strong",{children:"Quantidade:"}),Object(b.jsx)("span",{className:"ms-2",children:s.quantity})]}),Object(b.jsxs)("div",{className:"fs-6 mb-1",children:[Object(b.jsx)("strong",{children:"Total:"}),Object(b.jsx)("span",{className:"ms-2",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.total)})]}),Object(b.jsxs)("div",{className:"fs-6 mb-3",children:[Object(b.jsx)("strong",{children:"Status:"}),Object(b.jsx)("span",{className:"ms-2",children:Object(b.jsx)(X.a,{bg:ee[s.status],children:$[s.status]})})]}),Object(b.jsxs)(_.a.Select,{value:d,onChange:function(e){u(e.currentTarget.value)},children:[Object(b.jsx)("option",{children:"Selecione o status do pedido"}),Object(b.jsx)("option",{value:"PENDING",children:"Pendente"}),Object(b.jsx)("option",{value:"PREPARING",children:"Preparando"}),Object(b.jsx)("option",{value:"DONE",children:"Entregue"}),Object(b.jsx)("option",{value:"CANCELLED",children:"Cancelado"})]})]}),Object(b.jsxs)(ne.a.Footer,{children:[Object(b.jsx)(P.a,{onClick:function(){return e.goBack()},variant:"secondary",children:"Voltar"}),Object(b.jsx)(P.a,{onClick:function(){return O.apply(this,arguments)},className:"ms-2",variant:"success",children:"Alterar Status do pedido"})]})]})]}):null}function se(){return Object(b.jsxs)(l.c,{children:[Object(b.jsx)(l.a,{exact:!0,path:"/",component:R}),Object(b.jsx)(l.a,{path:"/products/new",component:V}),Object(b.jsx)(l.a,{path:"/products/:id",component:U}),Object(b.jsx)(l.a,{exact:!0,path:"/orders",component:ce}),Object(b.jsx)(l.a,{path:"/orders/:id",component:re})]})}function ae(){return Object(b.jsx)(i.a,{children:Object(b.jsx)(O,{children:Object(b.jsxs)("div",{className:"wrapper",children:[Object(b.jsx)(w,{}),Object(b.jsx)("main",{id:"main-content",className:"container-fluid",children:Object(b.jsx)(se,{})})]})})})}a.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(ae,{})}),document.getElementById("root"))}},[[325,1,2]]]);
//# sourceMappingURL=main.360ab589.chunk.js.map