(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{172:function(e,t,c){},182:function(e,t,c){},183:function(e,t,c){},184:function(e,t,c){},203:function(e,t,c){},331:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),s=c(28),a=c.n(s),i=(c(172),c(24)),o=c(79),j=c.n(o),d=c(340),l=c(7),b=c(16),u=c(2),O=Object(n.createContext)({});function x(e){var t=e.children,c=Object(b.g)(),r=Object(n.useState)(!1),s=Object(l.a)(r,2),a=s[0],i=s[1],o=function(){return i(!1)};return Object(n.useEffect)((function(){o()}),[c.pathname]),Object(u.jsx)(O.Provider,{value:{isOpen:a,closeDrawer:o,openDrawer:function(){return i(!0)}},children:t})}var h=function(){return Object(n.useContext)(O)},m=c(47);c(182);function p(){return Object(u.jsxs)(i.b,{to:"/",className:"text-white text-decoration-none logo",children:[Object(u.jsx)(m.c,{size:28}),Object(u.jsx)("span",{className:"fs-4 ms-1",children:"Pizzaria"})]})}var f=c(5),v=c.n(f),g=c(80);c(183);function N(){var e=Object(b.g)().pathname,t="/"===e||e.includes("/products"),c=e.includes("/orders");return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("ul",{className:"nav nav-pills flex-column",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsxs)(i.b,{to:"/",className:v()("nav-link text-white",{active:t}),children:[Object(u.jsx)(m.d,{size:20}),Object(u.jsx)("span",{className:"ms-2",children:"Produtos"})]})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsxs)(i.b,{to:"/orders",className:v()("nav-link text-white",{active:c}),children:[Object(u.jsx)(g.a,{size:20}),Object(u.jsx)("span",{className:"ms-2",children:"Pedidos"})]})})]})})}function y(){var e=h(),t=e.isOpen,c=e.closeDrawer;return Object(u.jsxs)(d.a,{className:"bg-dark text-white",show:t,onHide:c,children:[Object(u.jsx)(d.a.Header,{closeButton:!0,children:Object(u.jsx)(d.a.Title,{children:Object(u.jsx)(p,{})})}),Object(u.jsx)(d.a.Body,{children:Object(u.jsx)(N,{})})]})}c(184);function C(){return j()({maxWidth:900})?Object(u.jsx)(y,{}):Object(u.jsxs)("div",{className:"sidebar bg-dark text-white p-3",children:[Object(u.jsx)(p,{}),Object(u.jsx)("hr",{}),Object(u.jsx)(N,{})]})}var w=c(8),k=c.n(w),P=c(17),z=c(343),S=c(162),E=c.n(S).a.create({baseURL:"https://pizzariaserver.herokuapp.com/"}),I=c(163);function D(e){var t=e.title,c=h().openDrawer,n=j()({maxWidth:900});return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"d-flex align-items-center mt-4",children:[n&&Object(u.jsx)(z.a,{className:"me-2",variant:"outline-dark",onClick:c,children:Object(u.jsx)(I.a,{})}),Object(u.jsx)("h4",{className:"m-0",children:t})]}),Object(u.jsx)("hr",{})]})}var B=c(336);c(203);function L(e){var t=e.products,c=e.onEdit,n=e.onDelete;return Object(u.jsxs)(B.a,{striped:!0,bordered:!0,children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Imagem"}),Object(u.jsx)("th",{children:"Nome"}),Object(u.jsx)("th",{children:"Pre\xe7o"}),Object(u.jsx)("th",{children:"Ativo"}),Object(u.jsx)("th",{children:"A\xe7\xf5es"})]})}),Object(u.jsxs)("tbody",{children:[0===t.length&&Object(u.jsx)("tr",{children:Object(u.jsx)("td",{className:"text-center",colSpan:5,children:"Nenhum produto cadastrado \ud83c\udf55"})}),t.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"product-image",children:Object(u.jsx)("img",{src:e.image,alt:e.name})}),Object(u.jsxs)("td",{children:[Object(u.jsx)("strong",{children:e.name}),Object(u.jsx)("p",{className:"fs-6 fw-light",children:e.description})]}),Object(u.jsx)("td",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.price)}),Object(u.jsx)("td",{className:v()({"text-success":e.active},{"text-danger":!e.active}),children:e.active?"Sim":"N\xe3o"}),Object(u.jsx)("td",{children:Object(u.jsxs)("div",{className:"actions",children:[Object(u.jsx)(z.a,{onClick:function(){return c(e._id)},variant:"warning",size:"sm",children:Object(u.jsx)(m.b,{size:18})}),Object(u.jsx)(z.a,{onClick:function(){return n(e._id)},variant:"danger",size:"sm",children:Object(u.jsx)(m.a,{size:18})})]})})]},e._id)}))]})]})}var A=c(108),F=c.n(A),G=F.a.mixin({toast:!0,position:"top-right",iconColor:"white",customClass:{popup:"colored-toast"},showConfirmButton:!1,timer:5e3,timerProgressBar:!0,showCloseButton:!0}),R=F.a.mixin({title:"Aten\xe7\xe3o",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Sim, quero remover!",cancelButtonText:"Cancelar"});function q(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],r=t[1],s=Object(b.f)();function a(){return(a=Object(P.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.fire({text:"Deseja realmente deletar o produto ?"});case 2:if(!e.sent.value){e.next=9;break}return e.next=6,E.delete("/pizzas/".concat(t));case 6:return r(c.filter((function(e){return e._id!==t}))),e.next=9,G.fire({icon:"success",title:"Produto removido com sucesso"});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){E.get("pizzas").then((function(e){r(e.data)}))}),[]),Object(u.jsxs)("section",{id:"page-products",children:[Object(u.jsx)(D,{title:"Produtos"}),Object(u.jsx)(z.a,{onClick:function(){s.push("/products/new")},className:"mb-3",children:"Adicionar Produto"}),Object(u.jsx)(L,{onEdit:function(e){s.push("/products/".concat(e))},onDelete:function(e){return a.apply(this,arguments)},products:c})]})}var _=c(3),T=c(341),H=c(37),J=c(90),V=c(29),W=V.a({image:V.b().required("Imagem \xe9 obrigat\xf3ria"),name:V.b().required("Nome \xe9 obrigat\xf3rio"),price:V.b().required("Pre\xe7o \xe9 obrigat\xf3rio"),description:V.b().required("Descri\xe7\xe3o \xe9 obrigat\xf3ria")});function M(){var e,t,c,r,s=Object(b.f)(),a=Object(n.useState)(!0),i=Object(l.a)(a,2),o=i[0],j=i[1],d=Object(H.d)({resolver:Object(J.a)(W)}),O=d.register,x=d.handleSubmit,h=d.formState.errors;function m(){return(m=Object(P.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.post("pizzas",Object(_.a)(Object(_.a)({},t),{},{active:o}));case 2:return s.push("/"),e.next=5,G.fire({icon:"success",title:"Produto adicionado com sucesso"});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsxs)("section",{id:"page-products-add",children:[Object(u.jsx)(D,{title:"Adicionar Produto"}),Object(u.jsxs)(T.a,{onSubmit:x((function(e){return m.apply(this,arguments)})),children:[Object(u.jsxs)(T.a.Group,{className:"mb-3",children:[Object(u.jsx)(T.a.Label,{children:"Imagem"}),Object(u.jsx)(T.a.Control,Object(_.a)({type:"text",isInvalid:!!h.image},O("image"))),Object(u.jsx)(T.a.Control.Feedback,{type:"invalid",children:null===(e=h.image)||void 0===e?void 0:e.message})]}),Object(u.jsxs)(T.a.Group,{className:"mb-3",children:[Object(u.jsx)(T.a.Label,{children:"Nome"}),Object(u.jsx)(T.a.Control,Object(_.a)({type:"text",isInvalid:!!h.name},O("name"))),Object(u.jsx)(T.a.Control.Feedback,{type:"invalid",children:null===(t=h.name)||void 0===t?void 0:t.message})]}),Object(u.jsxs)(T.a.Group,{className:"mb-3",children:[Object(u.jsx)(T.a.Label,{children:"Pre\xe7o"}),Object(u.jsx)(T.a.Control,Object(_.a)({type:"text",isInvalid:!!h.price},O("price"))),Object(u.jsx)(T.a.Control.Feedback,{type:"invalid",children:null===(c=h.price)||void 0===c?void 0:c.message})]}),Object(u.jsxs)(T.a.Group,{className:"mb-3",children:[Object(u.jsx)(T.a.Label,{children:"Descri\xe7\xe3o"}),Object(u.jsx)(T.a.Control,Object(_.a)({as:"textarea",rows:3,isInvalid:!!h.description},O("description"))),Object(u.jsx)(T.a.Control.Feedback,{type:"invalid",children:null===(r=h.description)||void 0===r?void 0:r.message})]}),Object(u.jsx)(T.a.Check,{checked:o,onChange:function(e){return j(e.target.checked)},type:"switch",label:"Ativo",className:"mb-3"}),Object(u.jsx)(z.a,{className:"mb-3",variant:"primary",type:"submit",children:"Salvar Produto"})]})]})}var Q=V.a({image:V.b().required("Imagem \xe9 obrigat\xf3ria"),name:V.b().required("Nome \xe9 obrigat\xf3rio"),price:V.b().required("Pre\xe7o \xe9 obrigat\xf3rio"),description:V.b().required("Descri\xe7\xe3o \xe9 obrigat\xf3ria")});function U(){var e,t,c,r,s=Object(b.f)(),a=Object(b.h)(),i=Object(n.useState)(!0),o=Object(l.a)(i,2),j=o[0],d=o[1],O=Object(H.d)({resolver:Object(J.a)(Q)}),x=O.register,h=O.handleSubmit,m=O.setValue,p=O.formState.errors;function f(){return(f=Object(P.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.put("/pizzas/".concat(a.id),Object(_.a)(Object(_.a)({},t),{},{active:j}));case 2:return s.push("/"),e.next=5,G.fire({icon:"success",title:"Produto editado com sucesso"});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){E.get("/pizzas/".concat(a.id)).then((function(e){var t=e.data;m("image",t.image),m("name",t.name),m("price",t.price),m("description",t.description),d(t.active)}))}),[m,a.id]),Object(u.jsxs)("section",{id:"page-products-add",children:[Object(u.jsx)(D,{title:"Editar Produto"}),Object(u.jsxs)(T.a,{onSubmit:h((function(e){return f.apply(this,arguments)})),children:[Object(u.jsxs)(T.a.Group,{className:"mb-3",children:[Object(u.jsx)(T.a.Label,{children:"Imagem"}),Object(u.jsx)(T.a.Control,Object(_.a)({type:"url",isInvalid:!!p.image},x("image"))),Object(u.jsx)(T.a.Control.Feedback,{type:"invalid",children:null===(e=p.image)||void 0===e?void 0:e.message})]}),Object(u.jsxs)(T.a.Group,{className:"mb-3",children:[Object(u.jsx)(T.a.Label,{children:"Nome"}),Object(u.jsx)(T.a.Control,Object(_.a)({type:"text",isInvalid:!!p.name},x("name"))),Object(u.jsx)(T.a.Control.Feedback,{type:"invalid",children:null===(t=p.name)||void 0===t?void 0:t.message})]}),Object(u.jsxs)(T.a.Group,{className:"mb-3",children:[Object(u.jsx)(T.a.Label,{children:"Pre\xe7o"}),Object(u.jsx)(T.a.Control,Object(_.a)({type:"text",isInvalid:!!p.price},x("price"))),Object(u.jsx)(T.a.Control.Feedback,{type:"invalid",children:null===(c=p.price)||void 0===c?void 0:c.message})]}),Object(u.jsxs)(T.a.Group,{className:"mb-3",children:[Object(u.jsx)(T.a.Label,{children:"Descri\xe7\xe3o"}),Object(u.jsx)(T.a.Control,Object(_.a)({as:"textarea",rows:3,isInvalid:!!p.description},x("description"))),Object(u.jsx)(T.a.Control.Feedback,{type:"invalid",children:null===(r=p.description)||void 0===r?void 0:r.message})]}),Object(u.jsx)(T.a.Check,{checked:j,onChange:function(e){return d(e.target.checked)},type:"switch",label:"Ativo",className:"mb-3"}),Object(u.jsx)(z.a,{className:"mb-3",variant:"primary",type:"submit",children:"Salvar Produto"})]})]})}var K=c(9),X=c(167),Y=c(337),Z=c(339),$=c(338),ee={PENDING:"Pendente",PREPARING:"Preparando",DONE:"Entregue",CANCELLED:"Cancelado"},te={PENDING:"secondary",PREPARING:"warning",DONE:"success",CANCELLED:"danger"};function ce(e){var t=e.orders,c=e.onNavigate;return Object(u.jsxs)(B.a,{striped:!0,bordered:!0,children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"ID do pedido"}),Object(u.jsx)("th",{children:"Item"}),Object(u.jsx)("th",{children:"Total"}),Object(u.jsx)("th",{children:"Status"}),Object(u.jsx)("th",{className:"text-center",children:"A\xe7\xf5es"})]})}),Object(u.jsxs)("tbody",{children:[0===t.length&&Object(u.jsx)("tr",{children:Object(u.jsx)("td",{className:"text-center",colSpan:5,children:"Sem pedidos \ud83c\udf55"})}),t.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:["#",e._id]}),Object(u.jsx)("td",{children:e.item.name}),Object(u.jsx)("td",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.total)}),Object(u.jsx)("td",{children:Object(u.jsx)(Y.a,{bg:te[e.status],children:ee[e.status]})}),Object(u.jsx)("td",{className:"text-center",children:Object(u.jsx)(Z.a,{placement:"top-end",overlay:Object(u.jsx)($.a,{children:"Detalhes do pedido"}),children:Object(u.jsx)(z.a,{onClick:function(){return c(e._id)},variant:"primary",size:"sm",children:Object(u.jsx)(g.b,{size:18})})})})]},e._id)}))]})]})}function ne(){var e=Object(b.f)(),t=Object(n.useState)([]),c=Object(l.a)(t,2),r=c[0],s=c[1];return Object(n.useEffect)((function(){E.get("orders").then((function(e){s(e.data)})),Object(X.io)("https://pizzariaserver.herokuapp.com/").on("newOrder",function(){var e=Object(P.a)(k.a.mark((function e(t){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t,s((function(e){return[c].concat(Object(K.a)(e))})),new Audio("".concat("/pizzaria","/notification.mp3")).play(),e.next=5,G.fire({icon:"info",title:"Novo pedido adicionado"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(u.jsxs)("section",{id:"page-orders",children:[Object(u.jsx)(D,{title:"Pedidos"}),Object(u.jsx)(ce,{orders:r,onNavigate:function(t){e.push("/orders/".concat(t))}})]})}var re=c(342);function se(){var e=Object(b.f)(),t=Object(b.h)(),c=Object(n.useState)(),r=Object(l.a)(c,2),s=r[0],a=r[1],i=Object(n.useState)(""),o=Object(l.a)(i,2),j=o[0],d=o[1];function O(){return(O=Object(P.a)(k.a.mark((function e(){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.patch("/orders/".concat(t.id),{status:j});case 2:return c=e.sent,a(c.data),e.next=6,G.fire({icon:"success",title:"Status do pedido alterado com sucesso"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){E.get("/orders/".concat(t.id)).then((function(e){var t=e.data;a(t),d(t.status)}))}),[t.id]),s?Object(u.jsxs)("section",{id:"page-order-details",children:[Object(u.jsx)(D,{title:"Pedido #".concat(t.id)}),Object(u.jsxs)(re.a,{children:[Object(u.jsxs)(re.a.Body,{children:[Object(u.jsxs)("div",{className:"fs-6 mb-1",children:[Object(u.jsx)("strong",{children:"Item:"}),Object(u.jsx)("span",{className:"ms-2",children:s.item.name})]}),Object(u.jsxs)("div",{className:"fs-6 mb-1",children:[Object(u.jsx)("strong",{children:"Descri\xe7\xe3o:"}),Object(u.jsx)("span",{className:"ms-2",children:s.item.description})]}),Object(u.jsxs)("div",{className:"fs-6 mb-1",children:[Object(u.jsx)("strong",{children:"Quantidade:"}),Object(u.jsx)("span",{className:"ms-2",children:s.quantity})]}),Object(u.jsxs)("div",{className:"fs-6 mb-1",children:[Object(u.jsx)("strong",{children:"Total:"}),Object(u.jsx)("span",{className:"ms-2",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.total)})]}),Object(u.jsxs)("div",{className:"fs-6 mb-3",children:[Object(u.jsx)("strong",{children:"Status:"}),Object(u.jsx)("span",{className:"ms-2",children:Object(u.jsx)(Y.a,{bg:te[s.status],children:ee[s.status]})})]}),Object(u.jsxs)(T.a.Select,{value:j,onChange:function(e){d(e.currentTarget.value)},children:[Object(u.jsx)("option",{children:"Selecione o status do pedido"}),Object(u.jsx)("option",{value:"PENDING",children:"Pendente"}),Object(u.jsx)("option",{value:"PREPARING",children:"Preparando"}),Object(u.jsx)("option",{value:"DONE",children:"Entregue"}),Object(u.jsx)("option",{value:"CANCELLED",children:"Cancelado"})]})]}),Object(u.jsxs)(re.a.Footer,{children:[Object(u.jsx)(z.a,{onClick:function(){return e.goBack()},variant:"secondary",children:"Voltar"}),Object(u.jsx)(z.a,{onClick:function(){return O.apply(this,arguments)},className:"ms-2",variant:"success",children:"Alterar Status do pedido"})]})]})]}):null}function ae(){return Object(u.jsxs)(b.c,{children:[Object(u.jsx)(b.a,{exact:!0,path:"/",component:q}),Object(u.jsx)(b.a,{path:"/products/new",component:M}),Object(u.jsx)(b.a,{path:"/products/:id",component:U}),Object(u.jsx)(b.a,{exact:!0,path:"/orders",component:ne}),Object(u.jsx)(b.a,{path:"/orders/:id",component:se})]})}function ie(){return Object(u.jsx)(i.a,{children:Object(u.jsx)(x,{children:Object(u.jsxs)("div",{className:"wrapper",children:[Object(u.jsx)(C,{}),Object(u.jsx)("main",{id:"main-content",className:"container-fluid",children:Object(u.jsx)(ae,{})})]})})})}a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(ie,{})}),document.getElementById("root"))}},[[331,1,2]]]);
//# sourceMappingURL=main.564fa524.chunk.js.map